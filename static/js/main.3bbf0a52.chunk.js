(this["webpackJsonpreactstrap-sidebare"]=this["webpackJsonpreactstrap-sidebare"]||[]).push([[0],{105:function(e,t,a){e.exports=a.p+"static/media/logo-red.fb7faccb.svg"},200:function(e,t,a){},201:function(e,t,a){},215:function(e,t,a){e.exports=a(419)},388:function(e,t,a){},389:function(e,t,a){},418:function(e,t,a){},419:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"getAdmin",(function(){return f})),a.d(n,"initAuth",(function(){return b})),a.d(n,"signInError",(function(){return v})),a.d(n,"signInSuccess",(function(){return k})),a.d(n,"signInWithGoogle",(function(){return y})),a.d(n,"signInWithEmailPassword",(function(){return S})),a.d(n,"signOut",(function(){return O})),a.d(n,"signOutSuccess",(function(){return C}));var r=a(1),o=a.n(r),c=a(36),l=a.n(c),i=a(6),s=a(30),u=a(204),m=a.n(u),d=a(80),h=a.n(d),p=(a(230),a(231),a(232),h.a.initializeApp({apiKey:"AIzaSyBep5xsAtCRREv1Q0XyaLT50vaDhC6b31Y",authDomain:"euskooters.firebaseapp.com",databaseURL:"https://euskooters.firebaseio.com",projectId:"euskooters",storageBucket:"euskooters.appspot.com",messagingSenderId:"406968921183",appId:"1:406968921183:web:dcde4c1e7c24a0d6663fea",measurementId:"G-811M2QCBZM"}),h.a.auth()),g=(h.a.database(),function(){var e=h.a.firestore();return e.settings({}),e}());function E(e){return console.log(e.user.email),function(t){g.collection("users").where("email","==",e.user.email).get().then((function(a){a.empty?console.log("No matching documents."):a.forEach((function(a){1==a.data().roles.admin?(console.log("es administrador"),t(k(e))):console.log("No es administrador")}))})).catch((function(e){return t(v(e))}))}}function f(){}function b(e){return{type:"INIT_AUTH",payload:e}}function v(e){return console.log("error al acceder"),{type:"SIGN_IN_ERROR",payload:e}}function k(e){return{type:"SIGN_IN_SUCCESS",payload:e.user}}function y(){return e=new m.a.auth.GoogleAuthProvider,function(t){p.signInWithPopup(e).then((function(e){return t(E(e))})).catch((function(e){return t(v(e))}))};var e}function S(e,t){return function(a){p.signInWithEmailAndPassword(e,t).then((function(e){return a(E(e))})).catch((function(e){return a(v(e))}))}}function O(){return function(e){p.signOut().then((function(){return e(C())}))}}function C(){return{type:"SIGN_OUT_SUCCESS"}}var j=new(a(205).a)({authenticated:!1,error:null,id:null});function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new j,t=arguments.length>1?arguments[1]:void 0,a=t.payload,n=t.type;switch(n){case"INIT_AUTH":case"SIGN_IN_SUCCESS":return e.merge({authenticated:!!a,id:a?a.uid:null});case"SIGN_OUT_SUCCESS":return new j;case"SIGN_IN_ERROR":return console.log("entro al reducer"),e.merge({authenticated:!1,error:a,id:null});default:return e}}var _=a(206);var U=Object(_.a)((function(e){return e.auth}),(function(e){return e.toJS()})),w=a(106),x=function(e){var t=e.component,a=e.authenticated,n=Object(w.a)(e,["component","authenticated"]);return o.a.createElement(s.b,Object.assign({},n,{render:function(e){return a?o.a.createElement(t,e):o.a.createElement(s.a,{to:{pathname:"/sign-in",state:{from:e.location}}})}}))},A=function(e){var t=e.component,a=e.authenticated,n=Object(w.a)(e,["component","authenticated"]);return o.a.createElement(s.b,Object.assign({},n,{render:function(e){return a?o.a.createElement(s.a,{to:{pathname:"/",state:{from:e.location}}}):o.a.createElement(t,e)}}))},I=a(8),L=a(9),P=a(15),F=a(11),T=a(10),B=a(4),D=a(48),R=a(49),M=a(209),G=a(7),H=(a(388),a(105)),q=a.n(H),K=function(e){Object(F.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).onChangeHandler=function(e){var t=e.currentTarget,a=t.name,r=t.value;"userEmail"===a?n.setState({email:r}):"userPassword"===a&&n.setState({password:r})},n.handleSubmit=function(e,t,a){0===t.length&&(console.log(a.userEmail),n.props.signInWithEmailPassword(a.userEmail,a.userPassword))},n.state={email:"",password:"",error:null},n.handleSubmit=n.handleSubmit.bind(Object(P.a)(n)),n.onChangeHandler=n.onChangeHandler.bind(Object(P.a)(n)),n}return Object(L.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"sign-in"},o.a.createElement("img",{class:"mx-auto d-block",src:q.a,width:"200px",height:"50px"}),o.a.createElement("br",null),null!==this.error&&o.a.createElement("div",null,this.error),o.a.createElement(G.AvForm,{onSubmit:this.handleSubmit},o.a.createElement(B.FormGroup,null,o.a.createElement(B.Label,{htmlFor:"userEmail",className:"block"},"Email:"),o.a.createElement(G.AvField,{type:"email",name:"userEmail",placeholder:"ejemplo123@gmail.com",id:"userEmail",onChange:function(t){return e.onChangeHandler(t)},errorMessage:"Correo no v\xe1lido",validate:{required:{value:!0},minLength:{value:3},maxLength:{value:50}}})),o.a.createElement(B.FormGroup,null,o.a.createElement(B.Label,{htmlFor:"userPassword",className:"block"},"Password:"),o.a.createElement(G.AvField,{type:"password",name:"userPassword",placeholder:"Contrase\xf1a",id:"userPassword",onChange:function(t){return e.onChangeHandler(t)},errorMessage:"La contrase\xf1a debe tener al menos 6 caracteres.",validate:{required:{value:!0},minLength:{value:6},maxLength:{value:20}}})),o.a.createElement(B.Button,{color:"secondary",type:"submit",className:"sign-in__button"},o.a.createElement(D.a,{icon:R.b,className:"mr-2"}),"Correo y Contrase\xf1a")),o.a.createElement(B.Button,{color:"danger",className:"sign-in__button_red",onClick:this.props.signInWithGoogle},o.a.createElement(D.a,{icon:M.a,className:"mr-2"}),"Entrar con Google")," "))}}]),a}(o.a.Component),W=Object(i.c)((function(e){return{auth:Object.values(e.auth)}}),{signInWithGoogle:y,signInWithEmailPassword:S})(K),z=a(53),X=(a(389),a(3)),$=a.n(X),Q=a(13),J=function(e){var t=Object(r.useState)(!0),a=Object(z.a)(t,2),n=a[0],c=a[1],l=e.icon,i=e.title,s=e.items;return o.a.createElement("div",null,o.a.createElement(B.NavItem,{onClick:function(){return c(!n)},className:$()({"menu-open":!n})},o.a.createElement(B.NavLink,{className:"dropdown-toggle"},o.a.createElement(D.a,{icon:l,className:"mr-2"}),i)),o.a.createElement(B.Collapse,{isOpen:!n,navbar:!0,className:$()("items-menu",{"mb-1":!n})},s.map((function(e,t){return o.a.createElement(B.NavItem,{key:t,className:"pl-4"},o.a.createElement(B.NavLink,{tag:Q.b,to:e.target},e.title))}))))},Z=[[{title:"Agregar Usuario",target:"/Add_user"},{title:"Listar Usuarios",target:"/List_users"},{title:"Modificar Eliminar Usuarios",target:"/Upd_Delete_users"}],[{title:"Agregar Skooter",target:"/Add_skooter"},{title:"Listar Skooter",target:"/List_skooters"},{title:"Modificar Eliminar Skooter",target:"/Upd_Delete_skooters"}],[{title:"Agregar Sitios",target:"/Add_places"},{title:"Listar Sitios",target:"/List_places"},{title:"Modificar Eliminar Sitios",target:"/Upd_Delete_places"}]],V=function(e){return o.a.createElement("div",{className:$()("sidebar",{"is-open":e.isOpen})},o.a.createElement("div",{className:"sidebar-header"},o.a.createElement("span",{color:"info",onClick:e.toggle,style:{color:"#fff"}},"\xd7"),o.a.createElement("br",null),o.a.createElement("img",{class:"mx-auto d-block",src:q.a,width:"200px",height:"50px"}),o.a.createElement("br",null)),o.a.createElement("div",{className:"side-menu"},o.a.createElement(B.Nav,{vertical:!0,className:"list-unstyled pb-3"},o.a.createElement("p",null,"Panel Administrativo"),o.a.createElement(J,{title:"Usuarios",icon:R.f,items:Z[0]}),o.a.createElement(J,{title:"Skooters",icon:R.e,items:Z[1]}),o.a.createElement(J,{title:"Sitios",icon:R.c,items:Z[2]}),o.a.createElement(B.NavItem,null,o.a.createElement(B.NavLink,{tag:Q.b,to:"/salir"},o.a.createElement(D.a,{icon:R.d,className:"mr-2"}),"Salir")))))},Y=function(e){var t=Object(r.useState)(!0),a=Object(z.a)(t,2),n=a[0],c=a[1];return o.a.createElement(B.Navbar,{color:"light",light:!0,className:"navbar shadow-sm p-3 mb-5 bg-white rounded",expand:"md"},o.a.createElement(B.Button,{color:"danger",onClick:e.toggle},o.a.createElement(D.a,{icon:R.a})),o.a.createElement(B.NavbarToggler,{onClick:function(){return c(!n)}}),o.a.createElement(B.Collapse,{isOpen:n,navbar:!0},o.a.createElement(B.Nav,{className:"ml-auto",navbar:!0})))},ee=a(44),te=a.n(ee),ae=a(68),ne=a(17);var re=function(){return function(e){g.collection("skooters").orderBy("id").limit(10).get().then((function(t){var a=[];t.forEach((function(e){a.push(Object(ne.a)({key:e.id},e.data()))})),e({type:"FETCH_SKOOTERS",payload:a})})).catch((function(e){console.log("Error getting documents",e)}))}},oe=function(e){return function(t){console.log("pagina "+e);var a=10*(e-1);console.log("search "+a);g.collection("skooters").orderBy("id").get().then((function(e){var n=e.docs[a];g.collection("skooters").orderBy("id").startAt(n.data().id).limit(10).get().then((function(e){var a=[];e.forEach((function(e){console.log(e.id),a.push(Object(ne.a)({key:e.id},e.data()))})),t({type:"FETCH_SKOOTERS",payload:a})}))})).catch((function(e){console.log("Error getting documents",e)}))}},ce=function(e){return function(){var t=Object(ae.a)(te.a.mark((function t(a){return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g.collection("skooters").doc(e).get().then((function(e){if(!e.exists)throw new Error("No Such Document");var t=e.data();a({type:"FETCH_SKOOTER",payload:t})}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},le=a(420),ie=function(e){Object(F.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).message=function(e){n.setState({idskooter:"",fadein:!0,message:e}),setTimeout((function(){n.setState({fadein:!1,message:""})}),3e3)},n.state={idskooter:"",errors:null,fadein:!1,message:""},n.handleChange=n.handleChange.bind(Object(P.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(P.a)(n)),n}return Object(L.a)(a,[{key:"handleChange",value:function(e){var t=e.currentTarget.value;this.setState({idskooter:t})}},{key:"handleSubmit",value:function(e,t,a){0===t.length?(this.props.onSubmit(a),this.message("Agregado")):this.message("Error campos no v\xe1lidos")}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(G.AvForm,{onSubmit:this.handleSubmit},o.a.createElement(G.AvGroup,null,o.a.createElement(B.Label,{htmlFor:"skooterIdskooter",className:"block"},"Id Skooter:"),o.a.createElement(G.AvField,{type:"text",name:"skooterIdskooter",value:this.state.idskooter,placeholder:"CX####",id:"skooterIdskooter",onChange:this.handleChange,errorMessage:"Id no v\xe1lido",validate:{required:{value:!0},pattern:{value:"^CX[0-9]+$"},minLength:{value:6},maxLength:{value:6}}})),o.a.createElement(B.Button,{color:"danger",type:"submit"},"Agregar Skooter")),o.a.createElement(B.Fade,{in:this.state.fadein,tag:"h3",className:"mt-3 text-center text-success"},this.state.message))}}]),a}(o.a.Component),se=Object(le.a)({form:"createSkooter"})(ie),ue=function(e){Object(F.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t){e.props.createSkooter(t)},e}return Object(L.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h3",null,"Crear un Skooter"),o.a.createElement(se,{onSubmit:this.onSubmit}))}}]),a}(o.a.Component),me=Object(i.c)(null,{createSkooter:function(e){return function(t){var a={id:e.skooterIdskooter,bateria:"",battery_level:"",cobertura:"",ultima_latitud:"",ultima_longitud:""};g.collection("skooters").doc(e.skooterIdskooter).set(a).catch((function(e){return t(function(e){return{type:"SAVE_ERROR",payload:e}}(e))}))}}})(ue),de=function(e){Object(F.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).message=function(e){n.setState({fadein:!0,message:e}),setTimeout((function(){n.setState({fadein:!1,message:""})}),3e3)},n.state={errors:null,fadein:!1,message:""},n.handleSubmit=n.handleSubmit.bind(Object(P.a)(n)),n}return Object(L.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchSkooter(this.props.match.params.id)}},{key:"handleSubmit",value:function(e,t,a){0===t.length?(this.props.editSkooter(this.props.match.params.id,a),this.message("Skooter Editado")):this.message("Error campos no v\xe1lidos")}},{key:"render",value:function(){if(this.props.skooter){var e={skooterIdskooter:this.props.skooter.id};return o.a.createElement("div",null,o.a.createElement("h3",null,"Editar un Skooter"),o.a.createElement("div",null,o.a.createElement(G.AvForm,{onSubmit:this.handleSubmit,model:e},o.a.createElement(G.AvGroup,null,o.a.createElement(B.Label,{htmlFor:"skooterIdskooter",className:"block"},"Id Skooter:"),o.a.createElement(G.AvField,{type:"text",name:"skooterIdskooter",placeholder:"CX####",id:"skooterIdskooter",errorMessage:"Id no v\xe1lido",validate:{required:{value:!0},pattern:{value:"^CX[0-9]+$"},minLength:{value:6},maxLength:{value:6}}})),o.a.createElement(B.Button,{color:"danger",type:"submit"},"Modificar Skooter")),o.a.createElement(B.Fade,{in:this.state.fadein,tag:"h3",className:"mt-3 text-center text-success"},this.state.message)))}return o.a.createElement(s.a,{to:{pathname:"/Upd_Delete_skooters"}})}}]),a}(o.a.Component),he=Object(i.c)((function(e,t){return{skooter:e.skooters[t.match.params.id]}}),{fetchSkooter:ce,editSkooter:function(e,t){return function(a){g.collection("skooters").doc(e).get().then((function(n){if(n.exists){g.collection("skooters").doc(t.skooterIdskooter).set(n.data()),g.collection("skooters").doc(t.skooterIdskooter).update({id:t.skooterIdskooter}).then(g.collection("skooters").doc(e).delete());a({type:"DELETE_SKOOTER",payload:e})}else console.log("No such document!")})).catch((function(e){console.log("Error getting document",e)}))}}})(de),pe=function(e){var t=Object(r.useState)(!0),a=Object(z.a)(t,2),n=a[0],c=a[1],l=function(){return c(!n)};return o.a.createElement("div",null,o.a.createElement(B.Modal,{isOpen:n,toggle:l},o.a.createElement(B.ModalHeader,{toggle:l},e.title),o.a.createElement(B.ModalBody,null,e.content),o.a.createElement(B.ModalFooter,null,e.actions,c)))},ge=a(24),Ee=Object(ge.a)(),fe=function(e){Object(F.a)(a,e);var t=Object(T.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(L.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchSkooter(this.props.match.params.id)}},{key:"renderActions",value:function(){var e=this,t=this.props.match.params.id;return o.a.createElement(o.a.Fragment,null,o.a.createElement(B.Button,{onClick:function(){return e.props.deleteSkooter(t)},className:"primary"},"Eliminar"),o.a.createElement(Q.b,{to:"/Upd_Delete_skooters",className:"secondary"},"Cancelar"))}},{key:"renderContent",value:function(){if(this.props.skooter)return"Est\xe1 seguro que quiere borrar el skooter con el id: ".concat(this.props.skooter.id);Ee.push("/Upd_Delete_skooters")}},{key:"render",value:function(){return this.props.skooter?o.a.createElement(pe,{title:"Eliminar Skooter",content:this.renderContent(),actions:this.renderActions(),onDismiss:function(){return Ee.push("/")}}):o.a.createElement(s.a,{to:{pathname:"/Upd_Delete_skooters"}})}}]),a}(o.a.Component),be=Object(i.c)((function(e,t){return{skooter:e.skooters[t.match.params.id]}}),{fetchSkooter:ce,deleteSkooter:function(e){return function(){var t=Object(ae.a)(te.a.mark((function t(a){return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g.collection("skooters").doc(e).delete(),a({type:"DELETE_SKOOTER",payload:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(fe),ve=a(52),ke=a.n(ve),ye=(a(200),function(e){Object(F.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).state={activePage:1},n}return Object(L.a)(a,[{key:"handlePageChange",value:function(e){console.log("active page is ".concat(e)),this.setState({activePage:e}),this.props.fetchSkootersPage(e)}},{key:"componentDidMount",value:function(){this.props.fetchSkooters()}},{key:"renderList",value:function(){return this.props.skooters.map((function(e){if(e.key)return o.a.createElement("tr",{key:e.key},o.a.createElement("td",null,e.id),o.a.createElement("td",null,e.bateria),o.a.createElement("td",null,e.battery_level),o.a.createElement("td",null,e.cobertura),o.a.createElement("td",null,e.ultima_latitud),o.a.createElement("td",null,e.ultima_longitud))}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h2",{className:"text-center"},"Skooters"),o.a.createElement(B.Table,{hover:!0,className:"text-center"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Nombre"),o.a.createElement("th",null,"Bateria"),o.a.createElement("th",null,"Nivel de Bateria"),o.a.createElement("th",null,"Cobertura"),o.a.createElement("th",null,"Ultima Latitud"),o.a.createElement("th",null,"Ultima Longitud"))),o.a.createElement("tbody",null,this.renderList())),o.a.createElement(ke.a,{activePage:this.state.activePage,itemsCountPerPage:10,totalItemsCount:140,pageRangeDisplayed:8,itemClass:"page-item",linkClass:"page-link",onChange:this.handlePageChange.bind(this)}))}}]),a}(o.a.Component)),Se=Object(i.c)((function(e){return{skooters:Object.values(e.skooters)}}),{fetchSkooters:re,fetchSkootersPage:oe})(ye),Oe=function(e){Object(F.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).state={activePage:1,id:null},n.handleSubmit=n.handleSubmit.bind(Object(P.a)(n)),n.handleChange=n.handleChange.bind(Object(P.a)(n)),n}return Object(L.a)(a,[{key:"handleChange",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;"userEmail"===a&&this.setState({email:n})}},{key:"handlePageChange",value:function(e){console.log("active page is ".concat(e)),this.setState({activePage:e}),this.props.fetchSkootersPage(e)}},{key:"handleSubmit",value:function(e,t,a){console.log("entra al submit"),0===t.length?(console.log("entra al metodo de buscar"),this.props.fetchSkootersSearch(a.skooterId),this.setState({activePage:1})):console.log("no entra al metodo")}},{key:"componentDidMount",value:function(){this.props.fetchSkooters()}},{key:"renderList",value:function(){return this.props.skooters.map((function(e){if(e.key)return o.a.createElement("tr",{key:e.key},o.a.createElement("td",null,e.id),o.a.createElement("td",null,o.a.createElement(Q.b,{to:"/skooters/edit/".concat(e.id),className:"button primary"},o.a.createElement(B.Button,null,"Editar"))),o.a.createElement("td",null,o.a.createElement(Q.b,{to:"/skooters/delete/".concat(e.id),className:"button negative"},o.a.createElement(B.Button,{color:"danger"},"Eliminar"))))}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(B.Row,null,o.a.createElement(B.Col,{sm:"12",md:{size:7}},o.a.createElement("h2",{className:"text-center"},"Skooters")),o.a.createElement(B.Col,{sm:"12",md:{size:5}},o.a.createElement("div",{className:"buscar"},o.a.createElement(G.AvForm,{onSubmit:this.handleSubmit},o.a.createElement(G.AvGroup,null,o.a.createElement(G.AvField,{type:"text",name:"skooterId",placeholder:"Id Skooter",id:"skooterId",onChange:this.handleChange,value:this.state.id,errorMessage:"Debe introducir un par\xe1metro de b\xfasqueda correcto",validate:{required:{value:!0},pattern:{value:"^CX[0-9]+$"},minLength:{value:2},maxLength:{value:6}}})),o.a.createElement(B.Button,{color:"danger",type:"submit"},"Buscar Skooter")))))),o.a.createElement(B.Table,{hover:!0,className:"text-center"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Nombre"),o.a.createElement("th",null,"Editar"),o.a.createElement("th",null,"Eliminar"))),o.a.createElement("tbody",null,this.renderList())),o.a.createElement(ke.a,{activePage:this.state.activePage,itemsCountPerPage:10,totalItemsCount:140,pageRangeDisplayed:8,itemClass:"page-item",linkClass:"page-link",onChange:this.handlePageChange.bind(this)}))}}]),a}(o.a.Component),Ce=Object(i.c)((function(e){return{skooters:Object.values(e.skooters)}}),{fetchSkooters:re,fetchSkootersPage:oe,fetchSkootersSearch:function(e){return function(t){g.collection("skooters").orderBy("id").where("id",">=",e).where("id","<=",e+"z").get().then((function(e){var a=[];e.forEach((function(e){a.push(Object(ne.a)({key:e.id},e.data()))})),t({type:"FETCH_SKOOTERS",payload:a})})).catch((function(e){console.log("Error getting documents",e)}))}}})(Oe);var je=function(){return function(e){g.collection("users").orderBy("email").limit(10).get().then((function(t){var a=[];t.forEach((function(e){a.push(Object(ne.a)({key:e.id},e.data()))})),e({type:"FETCH_USERS",payload:a})})).catch((function(e){console.log("Error getting documents",e)}))}},Ne=function(e){return function(t){console.log("pagina "+e);var a=10*(e-1);console.log("search "+a);g.collection("users").orderBy("email").get().then((function(e){var n=e.docs[a];g.collection("users").orderBy("email").startAt(n.data().email).limit(10).get().then((function(e){var a=[];e.forEach((function(e){console.log(e.id),a.push(Object(ne.a)({key:e.id},e.data()))})),t({type:"FETCH_USERS",payload:a})}))})).catch((function(e){console.log("Error getting documents",e)}))}},_e=function(e){return function(){var t=Object(ae.a)(te.a.mark((function t(a){return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g.collection("users").doc(e).get().then((function(e){if(!e.exists)throw new Error("No Such Document");var t=e.data();a({type:"FETCH_USER",payload:t})}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ue=function(e){Object(F.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).message=function(e){n.setState({name:"",email:"",balance:"",created_at:"",fadein:!0,message:e}),setTimeout((function(){n.setState({fadein:!1,message:""})}),3e3)},n.state={name:"",email:"",balance:"",created_at:"",errors:null,fadein:!1,message:""},n.handleChange=n.handleChange.bind(Object(P.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(P.a)(n)),n}return Object(L.a)(a,[{key:"handleChange",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;"userName"===a?this.setState({name:n}):"userEmail"===a?this.setState({email:n}):"userBalance"===a?this.setState({balance:n}):"created_at"===a&&this.setState({created_at:n})}},{key:"handleSubmit",value:function(e,t,a){0===t.length?(this.props.onSubmit(a),this.message("Agregado")):this.message("Error campos no v\xe1lidos")}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(G.AvForm,{onSubmit:this.handleSubmit},o.a.createElement(G.AvGroup,null,o.a.createElement(B.Label,{htmlFor:"userName",className:"block"},"Nombre:"),o.a.createElement(G.AvField,{type:"text",name:"userName",value:this.state.name,placeholder:"Nombre de usuario",id:"userName",onChange:this.handleChange,errorMessage:"Nombre no v\xe1lido",validate:{required:{value:!0},pattern:{value:"^([a-z\xf1\xe1\xe9\xed\xf3\xfaA-Z\xd1\xc1\xc9\xcd\xd3\xda0-9_-]*)+$"},minLength:{value:2},maxLength:{value:20}}})),o.a.createElement(B.FormGroup,null,o.a.createElement(B.Label,{htmlFor:"userEmail",className:"block"},"Correo:"),o.a.createElement(G.AvField,{type:"email",name:"userEmail",value:this.state.email,placeholder:"Email del Usuario",id:"userEmail",onChange:this.handleChange,errorMessage:"El correo del usuario es obligatorio",validate:{required:{value:!0},minLength:{value:4},maxLength:{value:40}}})),o.a.createElement(B.FormGroup,null,o.a.createElement(B.Label,{htmlFor:"userBalance",className:"block"},"Balance:"),o.a.createElement(G.AvField,{type:"number",name:"userBalance",value:this.state.balance,placeholder:"1",id:"userBalance",onChange:this.handleChange})),o.a.createElement(B.FormGroup,null,o.a.createElement(B.Label,{htmlFor:"created_at",className:"block"},"Fecha de creado:"),o.a.createElement(G.AvField,{type:"date",name:"created_at",value:this.state.balance,placeholder:"1",id:"created_at",onChange:this.handleChange})),o.a.createElement(B.Button,{color:"danger",type:"submit"},"Agregar Usuario")),o.a.createElement(B.Fade,{in:this.state.fadein,tag:"h3",className:"mt-3 text-center text-success"},this.state.message))}}]),a}(o.a.Component),we=Object(le.a)({form:"createUser"})(Ue),xe=function(e){Object(F.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t){e.props.createUser(t)},e}return Object(L.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h3",null,"Crear un Usuario"),o.a.createElement(we,{onSubmit:this.onSubmit}))}}]),a}(o.a.Component),Ae=Object(i.c)(null,{createUser:function(e){return function(t){var a={id:"",name:e.userName,email:e.userEmail,balance:e.userBalance,stripeCustomerId:""};g.collection("users").add(a).then((function(e){g.collection("users").doc(e.id).update({id:e.id})})).catch((function(e){console.error("Error adding document: ",e)}))}}})(xe),Ie=function(e){Object(F.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).message=function(e){n.setState({fadein:!0,message:e}),setTimeout((function(){n.setState({fadein:!1,message:""})}),3e3)},n.state={name:"",email:"",balance:"",errors:null,fadein:!1,message:""},n.handleSubmit=n.handleSubmit.bind(Object(P.a)(n)),n}return Object(L.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchUser(this.props.match.params.id)}},{key:"handleSubmit",value:function(e,t,a){0===t.length?(this.props.editUser(this.props.match.params.id,a),this.message("Usuario Editado Correctamente")):this.message("Error campos no v\xe1lidos")}},{key:"render",value:function(){if(this.props.user){var e={userName:this.props.user.name,userEmail:this.props.user.email,userBalance:this.props.user.balance};return o.a.createElement("div",null,o.a.createElement(G.AvForm,{onSubmit:this.handleSubmit,model:e},o.a.createElement(G.AvGroup,null,o.a.createElement(B.Label,{htmlFor:"userName",className:"block"},"Nombre:"),o.a.createElement(G.AvField,{type:"text",name:"userName",value:this.state.name,placeholder:"Nombre de usuario",id:"userName",errorMessage:"Nombre no v\xe1lido",validate:{required:{value:!0},pattern:{value:"^([a-z\xf1\xe1\xe9\xed\xf3\xfaA-Z\xd1\xc1\xc9\xcd\xd3\xda0-9_-]*)+$"},minLength:{value:2},maxLength:{value:20}}})),o.a.createElement(B.FormGroup,null,o.a.createElement(B.Label,{htmlFor:"userEmail",className:"block"},"Correo:"),o.a.createElement(G.AvField,{type:"email",name:"userEmail",value:this.state.email,placeholder:"Email del Usuario",id:"userEmail",errorMessage:"El correo del usuario es obligatorio",validate:{required:{value:!0},minLength:{value:4},maxLength:{value:40}}})),o.a.createElement(B.FormGroup,null,o.a.createElement(B.Label,{htmlFor:"userBalance",className:"block"},"Balance:"),o.a.createElement(G.AvField,{type:"number",name:"userBalance",value:this.state.balance,placeholder:"1",id:"userBalance"})),o.a.createElement(B.Button,{color:"danger",type:"submit"},"Editar Usuario")),o.a.createElement(B.Fade,{in:this.state.fadein,tag:"h3",className:"mt-3 text-center text-success"},this.state.message))}return console.log("entro aki"),o.a.createElement(s.a,{to:{pathname:"/Upd_Delete_users"}})}}]),a}(o.a.Component),Le=Object(i.c)((function(e,t){return{user:e.users[t.match.params.id]}}),{fetchUser:_e,editUser:function(e,t){return function(a){g.collection("users").doc(e).update({name:t.userName,email:t.userEmail,balance:t.userBalance}),a({type:"DELETE_USER",payload:e})}}})(Ie),Pe=function(e){Object(F.a)(a,e);var t=Object(T.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(L.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchUser(this.props.match.params.id)}},{key:"renderActions",value:function(){var e=this,t=this.props.match.params.id;return o.a.createElement(o.a.Fragment,null,o.a.createElement(B.Button,{onClick:function(){return e.props.deleteUser(t)},className:"primary"},"Eliminar"),o.a.createElement(Q.b,{to:"/Upd_Delete_users",className:"secondary"},"Cancelar"))}},{key:"renderContent",value:function(){return"Est\xe1 seguro que quiere borrar el usuario con el nombre: ".concat(this.props.user.name," y el email: ").concat(this.props.user.email)}},{key:"render",value:function(){return this.props.user?o.a.createElement(pe,{title:"Eliminar Usuario",content:this.renderContent(),actions:this.renderActions()}):o.a.createElement(s.a,{to:{pathname:"/Upd_Delete_users"}})}}]),a}(o.a.Component),Fe=Object(i.c)((function(e,t){return{user:e.users[t.match.params.id]}}),{fetchUser:_e,deleteUser:function(e){return function(){var t=Object(ae.a)(te.a.mark((function t(a){return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g.collection("users").doc(e).delete(),a({type:"DELETE_USER",payload:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(Pe),Te=(a(201),function(e){Object(F.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).state={activePage:1},n}return Object(L.a)(a,[{key:"handlePageChange",value:function(e){console.log("active page is ".concat(e)),this.setState({activePage:e}),this.props.fetchUsersPage(e)}},{key:"componentDidMount",value:function(){this.props.fetchUsers()}},{key:"renderList",value:function(){return this.props.users.map((function(e){if(e.key)return o.a.createElement("tr",{key:e.key},o.a.createElement("td",null,e.name),o.a.createElement("td",null,e.email),o.a.createElement("td",null,e.id),o.a.createElement("td",null,e.balance),o.a.createElement("td",null,e.stripeCustomerId))}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h2",{className:"text-center"},"Usuarios"),o.a.createElement(B.Table,{hover:!0,className:"text-center"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Nombre"),o.a.createElement("th",null,"Correo"),o.a.createElement("th",null,"ID"),o.a.createElement("th",null,"Balance"),o.a.createElement("th",null,"Customer ID"))),o.a.createElement("tbody",null,this.renderList())),o.a.createElement(ke.a,{activePage:this.state.activePage,itemsCountPerPage:10,totalItemsCount:5440,pageRangeDisplayed:8,itemClass:"page-item",linkClass:"page-link",onChange:this.handlePageChange.bind(this)}))}}]),a}(o.a.Component)),Be=Object(i.c)((function(e){return{users:Object.values(e.users)}}),{fetchUsers:je,fetchUsersPage:Ne})(Te),De=function(e){Object(F.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).state={activePage:1,email:null},n.handleSubmit=n.handleSubmit.bind(Object(P.a)(n)),n.handleChange=n.handleChange.bind(Object(P.a)(n)),n}return Object(L.a)(a,[{key:"handleChange",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;"userEmail"===a&&this.setState({email:n})}},{key:"handlePageChange",value:function(e){console.log("active page is ".concat(e)),this.setState({activePage:e}),this.props.fetchUsersPage(e)}},{key:"handleSubmit",value:function(e,t,a){console.log("entra al submit"),0===t.length?(console.log("entra al metodo de buscar"),this.props.fetchUsersSearch(a.userEmail),this.setState({activePage:1})):console.log("no entra al metodo")}},{key:"componentDidMount",value:function(){this.props.fetchUsers()}},{key:"renderList",value:function(){return this.props.users.map((function(e){if(e.key)return o.a.createElement("tr",{key:e.key},o.a.createElement("td",null,e.name),o.a.createElement("td",null,e.email),o.a.createElement("td",null,o.a.createElement(Q.b,{to:"/users/edit/".concat(e.key),className:"button primary"},o.a.createElement(B.Button,null,"Editar"))),o.a.createElement("td",null,o.a.createElement(Q.b,{to:"/users/delete/".concat(e.key),className:"button negative"},o.a.createElement(B.Button,{color:"danger"},"Eliminar"))))}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(B.Row,null,o.a.createElement(B.Col,{sm:"12",md:{size:7}},o.a.createElement("h2",{className:"text-center"},"Usuarios")),o.a.createElement(B.Col,{sm:"12",md:{size:5}},o.a.createElement("div",{className:"buscar"},o.a.createElement(G.AvForm,{onSubmit:this.handleSubmit},o.a.createElement(G.AvGroup,null,o.a.createElement(G.AvField,{type:"text",name:"userEmail",placeholder:"Email del Usuario",id:"userEmail",onChange:this.handleChange,value:this.state.email,errorMessage:"Debe introducir un par\xe1metro de b\xfasqueda",validate:{required:{value:!0}}})),o.a.createElement(B.Button,{color:"danger",type:"submit"},"Buscar Usuario")))))),o.a.createElement(B.Table,{hover:!0,className:"text-center"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Nombre"),o.a.createElement("th",null,"Correo"),o.a.createElement("th",null,"Editar"),o.a.createElement("th",null,"Eliminar"))),o.a.createElement("tbody",null,this.renderList())),o.a.createElement(ke.a,{activePage:this.state.activePage,itemsCountPerPage:10,totalItemsCount:5440,pageRangeDisplayed:8,itemClass:"page-item",linkClass:"page-link",onChange:this.handlePageChange.bind(this)}))}}]),a}(o.a.Component),Re=Object(i.c)((function(e){return{users:Object.values(e.users)}}),{fetchUsers:je,fetchUsersPage:Ne,fetchUsersSearch:function(e){return function(t){g.collection("users").where("email",">=",e).where("email","<=",e+"z").get().then((function(e){var a=[];e.forEach((function(e){a.push(Object(ne.a)({key:e.id},e.data()))})),t({type:"FETCH_USERS",payload:a})})).catch((function(e){console.log("Error getting documents",e)}))}}})(De),Me=function(e){Object(F.a)(a,e);var t=Object(T.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(L.a)(a,[{key:"componentDidMount",value:function(){this.props.signOut(),console.log("pasa por component")}},{key:"render",value:function(){return o.a.createElement(s.a,{to:{pathname:"/sign-in"}})}}]),a}(o.a.Component),Ge=Object(i.c)((function(e){return{auth:Object.values(e.auth)}}),{signOut:O})(Me),He=function(e){return o.a.createElement(B.Container,{fluid:!0,className:$()("content",{"is-open":e.isOpen})},o.a.createElement(Y,{toggle:e.toggle}),o.a.createElement(s.d,null,o.a.createElement(s.b,{exact:!0,path:"/",component:function(){return" "}}),o.a.createElement(s.b,{exact:!0,path:"/salir",component:Ge}),o.a.createElement(s.b,{exact:!0,path:"/Pages",component:function(){return"Pages"}}),o.a.createElement(s.b,{exact:!0,path:"/faq",component:function(){return"FAQ"}}),o.a.createElement(s.b,{exact:!0,path:"/contact",component:function(){return"Contact"}}),o.a.createElement(s.b,{exact:!0,path:"/Add_user",component:Ae}),o.a.createElement(s.b,{exact:!0,path:"/List_users",component:Be}),o.a.createElement(s.b,{exact:!0,path:"/Upd_Delete_users",component:Re}),o.a.createElement(s.b,{exact:!0,path:"/users/edit/:id",component:Le}),o.a.createElement(s.b,{exact:!0,path:"/users/delete/:id",component:Fe}),o.a.createElement(s.b,{exact:!0,path:"/Add_skooter",component:me}),o.a.createElement(s.b,{exact:!0,path:"/List_skooters",component:Se}),o.a.createElement(s.b,{exact:!0,path:"/Upd_Delete_skooters",component:Ce}),o.a.createElement(s.b,{exact:!0,path:"/skooters/edit/:id",component:he}),o.a.createElement(s.b,{exact:!0,path:"/skooters/delete/:id",component:be}),o.a.createElement(s.b,{exact:!0,path:"/Add_places",component:function(){return"Pagina agregar sitios"}}),o.a.createElement(s.b,{exact:!0,path:"/List_places",component:function(){return"Pagina listar sitios"}}),o.a.createElement(s.b,{exact:!0,path:"/Upd_Delete_places",component:function(){return"Pgina Actualizar sitios"}})))},qe=function(){var e=Object(r.useState)(!0),t=Object(z.a)(e,2),a=t[0],n=t[1],c=function(){return n(!a)};return o.a.createElement(Q.a,{history:Ee},o.a.createElement("div",{className:"App wrapper"},o.a.createElement(V,{toggle:c,isOpen:a}),o.a.createElement(He,{toggle:c,isOpen:a})))},Ke=U,We={signOut:n.signOut},ze=Object(s.g)(Object(i.c)(Ke,We)((function(e){var t=e.authenticated;e.signOut;return o.a.createElement(s.c,{history:Ee},o.a.createElement("div",null,o.a.createElement("main",null,o.a.createElement(A,{authenticated:t,const:!0,path:"/sign-in",component:W}),o.a.createElement(x,{authenticated:t,const:!0,exact:!0,path:"/",component:qe}))))}))),Xe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function $e(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Qe=a(14),Je=a(202),Ze=a(79),Ve=a(42),Ye=a(69),et=a.n(Ye);function tt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SKOOTERS":return Object(ne.a)({state:e},et.a.mapKeys(t.payload,"id"));case"FETCH_SKOOTER":case"CREATE_SKOOTER":case"EDIT_SKOOTERS":return Object(ne.a)({},e,Object(Ve.a)({},t.payload.id,t.payload));case"DELETE_SKOOTER":return et.a.omit(e,t.payload);default:return e}}function at(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USERS":return Object(ne.a)({state:e},et.a.mapKeys(t.payload,"id"));case"FETCH_USER":case"CREATE_USER":case"EDIT_USERS":return Object(ne.a)({},e,Object(Ve.a)({},t.payload.id,t.payload));case"DELETE_USER":return et.a.omit(e,t.payload);default:return e}}var nt=function(e){return Object(Qe.c)({auth:N,skooters:tt,users:at,router:Object(Ze.b)(e)})},rt=a(213);a(417),a(418);var ot,ct,lt=Object(Qe.e)(nt(Ee),ot,Object(Qe.d)(Object(Qe.a)(rt.a,Object(Je.a)(Ee)))),it=document.getElementById("root");(function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");Xe?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):$e(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):$e(e)}))}})(),(ct=lt.dispatch,new Promise((function(e,t){var a=p.onAuthStateChanged((function(t){ct(b(t)),a(),e()}),(function(e){return t(e)}))}))).then((function(){return e=ze,void l.a.render(o.a.createElement(i.a,{store:lt},o.a.createElement(Ze.a,{history:Ee},o.a.createElement("div",null,o.a.createElement(e,null)))),it);var e})).catch((function(e){return console.error(e)}))}},[[215,1,2]]]);
//# sourceMappingURL=main.3bbf0a52.chunk.js.map